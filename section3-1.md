## PIO概要

RP2040 有两个完全相同的 PIO 块。每个 PIO 块都独立连接到总线、GPIO 和中断控制器。一个 PIO 块的结构图如下图所示。


| ![图38](figures/figure-38.png)] |
|:--:|
| 图38. PIO 块结构图。RP2040 有两个 PIO 块，每个块有四个状态机。四个状态机可以从一片共享指令内存中同时执行指令。FIFO 数据队列负责在 PIO 和系统之间缓冲传输的数据。每个状态机可以通过 GPIO 映射逻辑监视并操作最多 30 个 GPIO。|

可编程输入输出块（PIO）是一个非常灵活的硬件接口。它能支持许多 IO 标准，例如：

- 8080 和 6800 并行总线
- I2C
- 3针 I2S
- SDIO
- SPI、DSPI、QSPI
- UART
- DPI 或 VGA（通过电阻式DAC）

PIO 的编程方式与处理器类似。两个 PIO 块，每个有四个状态机，这些都可以独立执行顺序代码，来操作 GPIO 并传输数据。但不同于通用处理器，PIO 状态机是专门为输入输出设计的，因此具有确定性、精确的时间，并与固定功能的硬件紧密结合。
每个状态机都拥有以下机构：

- 两个 32 位移位寄存器 - 可以向任意方向位移任意比特
- 两个 32 位可擦写寄存器（scratch registor）
- 每个方向上（TX/RX）都有 4x32 位总线 FIFO，可以重新配置为单向 8x32 FIFO
- 可分割时钟分割器（16整数，8个分数位）
- 灵活的GPIO映射
- DMA接口，每个时钟周期最多可维持来自系统DMA的1个字
- IRQ标志设置/清除/状态查询






